cmake_minimum_required(VERSION 3.20.0)
set(projectName "core" )
set(filewatch "filewatch")
set(imageMagick "imageMagick")
project(${projectName} C CXX)
set(CMAKE_CXX_STANDARD 11)
include_directories("./include")
if (LINUX)
    add_subdirectory(linux)
    include_directories("./include/linux")
    add_executable("watch" "filewatchTest.c" linux)
endif()
if(WIN32)
    add_subdirectory(${imageMagick})
    add_subdirectory(${filewatch})
    link_directories("./imageMagick/lib" )
    add_library(${projectName} SHARED ${filewatch}   )
    target_link_libraries(${projectName} PUBLIC ${imageMagick} ${filewatch} )

    # add_executable("watch"  "filewatchTest.cpp" "./win32/fileWatch.cpp" )

endif()